

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Queries &mdash; Cutevariant  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Cutevariant  documentation" href="index.html"/>
        <link rel="up" title="Core API" href="core_api.html"/>
        <link rel="next" title="Project importer" href="importers.html"/>
        <link rel="prev" title="Command Line Interface" href="cli.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Cutevariant
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html#development">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line_usage.html">Command line usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dev_documentation.html">Documentation for developers</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="core_api.html">Core API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Queries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-cutevariant.core.command">Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cutevariant.core.querybuilder">Querybuilder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-cutevariant.core.sql">Low level SQL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cutevariant.core.vql">VQL language</a></li>
<li class="toctree-l3"><a class="reference internal" href="importers.html">Project importer</a></li>
<li class="toctree-l3"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l3"><a class="reference internal" href="writers.html">Writers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cutevariant</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="dev_documentation.html">Documentation for developers</a> &raquo;</li>
        
          <li><a href="core_api.html">Core API</a> &raquo;</li>
        
      <li>Queries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/queries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="queries">
<h1>Queries<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h1>
<p>From highest level of abstraction to lowest.</p>
<div class="section" id="module-cutevariant.core.command">
<span id="command"></span><h2>Command<a class="headerlink" href="#module-cutevariant.core.command" title="Permalink to this headline">¶</a></h2>
<p>Design pattern “COMMANDS” to execute VQL query .</p>
<p>Each VQL statement corresponds to a &lt;name&gt;_cmd() function.
You can use <cite>execute(conn, vql)</cite> or <cite>execute_all(conn, vql)</cite> to run a specific
VQL query.</p>
<p>Each command returns a JSON array with a success status code or with the
expected result.</p>
<p>Command module is usefull for CLI and for running VQL scripts.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="s2">&quot;project.db&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">variant</span> <span class="ow">in</span> <span class="n">execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">&quot;SELECT chr, pos FROM variants&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># How many variants ?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">&quot;COUNT FROM variants&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="py function">
<dt id="cutevariant.core.command.bed_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">bed_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">target</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">source</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#bed_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.bed_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new selection from a bed file</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>CREATE boby FROM variants INTERSECT “path/to/file.bed”</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>bed_cmd(conn, “path/to/file.bed”, “boby”, “source”)</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path to bedfile ( a 3 columns files with chr, start, end )</p></li>
<li><p><strong>target</strong> (<em>str</em>) – target selection table</p></li>
<li><p><strong>source</strong> (<em>str</em>) – source selection table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>{“id”: id of last line inserted} if lines have been inserted,</dt><dd><p>or empty dict in case of error</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#cutevariant.core.vql.VQLSyntaxError" title="cutevariant.core.vql.VQLSyntaxError"><strong>vql.VQLSyntaxError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.clear_cache_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">clear_cache_cmd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#clear_cache_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.clear_cache_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear function cache by memoization module.</p>
<p>This method must be called when new project is open</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.count_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">count_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">['chr', 'pos', 'ref', 'alt']</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">having</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#count_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.count_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Count command</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>COUNT FROM variants WHERE pos &gt; 3</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>count_cmd(conn, “variants”, {“AND”: [{“pos”,”=”,3}]}))</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>optional</em>) – virtual source table</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>, </em><em>optional</em>) – nested tree of condition</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Count of variants wgstith “count” as a key</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.create_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">create_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">target</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">count</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#create_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.create_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a selection from the given source, filtered by filters</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>CREATE boby FROM variants WHERE pos &gt; 3</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>create_cmd(conn, “boby”, “variants”, {“AND”:[{“pos”,”&gt;”,3}]})</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>target</strong> (<em>str</em>) – target selection name</p></li>
<li><p><strong>source</strong> (<em>str</em>) – source selection name</p></li>
<li><p><strong>filters</strong> (<em>dict</em>) – filters used to select the variants from source</p></li>
<li><p><strong>count</strong> (<em>int</em>) – precomputed variant count</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>{“id”: selection_id} if lines have been inserted,</dt><dd><p>or empty dict in case of error</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.create_command_from_obj">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">create_command_from_obj</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">vql_obj</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#create_command_from_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.create_command_from_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Create command function from vql object according to its “cmd” key</p>
<p>cmd authorized:</p>
<blockquote>
<div><ul class="simple">
<li><p>select_cmd</p></li>
<li><p>count_cmd</p></li>
<li><p>drop_cmd</p></li>
<li><p>create_cmd</p></li>
<li><p>set_cmd</p></li>
<li><p>bed_cmd</p></li>
<li><p>show_cmd</p></li>
<li><p>import_cmd</p></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use <a class="reference internal" href="#cutevariant.core.command.execute" title="cutevariant.core.command.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> instead, that is a wrapper to this function.</p>
</div>
<p class="rubric">Examples</p>
<p>If you want to create a select_cmd function, pass a vql_obj like this one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="p">:</span> <span class="s2">&quot;select_cmd&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="p">],</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;variants&quot;</span><span class="p">,</span>
    <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{},</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3.connection</p></li>
<li><p><strong>vql_obj</strong> (<em>dict</em>) – A VQL object with requested commands at “cmd” key:
<cite>select_cmd, create_cmd, set_cmd, bed_cmd, show_cmd, import_cmd,
drop_cmd, count_cmd</cite>.
A VQL object is dictionary returned by vql.parse.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Function object wrapping the given vql_object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(function)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.drop_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">drop_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">feature</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#drop_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.drop_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop selection or set from database</p>
<p>This following VQL commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DROP</span> <span class="n">selections</span> <span class="n">boby</span>
<span class="n">DROP</span> <span class="n">wordsets</span> <span class="n">mygene</span>
</pre></div>
</div>
<p>will execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">drop_cmd</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">&quot;selections&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">)</span>
<span class="n">drop_cmd</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s2">&quot;wordsets&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite connection</p></li>
<li><p><strong>feature</strong> (<em>str</em>) – selections or wordsets (Names of the SQL tables).
Lower case features are also accepted.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – name of the selection or name of the wordset</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{“success”: &lt;boolean&gt;}; True if deletion is ok, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#cutevariant.core.vql.VQLSyntaxError" title="cutevariant.core.vql.VQLSyntaxError"><strong>vql.VQLSyntaxError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.execute">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">vql_source</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a vql query</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">variant</span> <span class="ow">in</span> <span class="n">execute</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="s2">&quot;SELECT chr from variants&quot;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>vql_source</strong> (<em>str</em>) – a VQL query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return command output as a dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.execute_all">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">execute_all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">vql_source</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#execute_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.execute_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a vql script</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">execute_all</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;CREATE boby FROM variants; CREATE raymon FROM variants;&quot;</span>
<span class="gp">... </span>    <span class="s2">&quot;CREATE charles = boby - variants; COUNT(charles)&quot;</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>vql_source</strong> (<em>str</em>) – a VQL query</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>(generator[dict])</em> – Yield command outputs as a dicts</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.import_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">import_cmd</code><span class="sig-paren">(</span><em class="sig-param">conn: sqlite3.Connection</em>, <em class="sig-param">feature=&lt;class 'str'&gt;</em>, <em class="sig-param">name=&lt;class 'str'&gt;</em>, <em class="sig-param">path=&lt;class 'str'&gt;</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#import_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.import_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Import command for wordsets only</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>IMPORT WORDSETS “gene.txt” AS boby</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>import_cmd(conn, “WORDSETS”, “gene.txt”)</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>feature</strong> (<em>str</em>) – “WORDSETS” (Name of the SQL table)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – name of the set</p></li>
<li><p><strong>path</strong> (<em>str</em>) – a filepath</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><cite>{success: &lt;boolean&gt;}</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#cutevariant.core.vql.VQLSyntaxError" title="cutevariant.core.vql.VQLSyntaxError"><strong>vql.VQLSyntaxError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.select_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">select_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">('chr', 'pos', 'ref', 'alt')</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">order_by</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order_desc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">having</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#select_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.select_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Select query Command</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>SELECT chr,pos FROM variants WHERE pos &gt; 3</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>select_cmd(conn, [“chr”, “pos”], variants”, {“AND”: [{“pos”,”=”,3}]}))</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>fields</strong> (<em>list</em><em>, </em><em>optional</em>) – list of fields</p></li>
<li><p><strong>filters</strong> (<em>dict</em><em>, </em><em>optional</em>) – nested tree of condition</p></li>
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>optional</em>) – virtual table source</p></li>
<li><p><strong>order_by</strong> (<em>list</em><em>, </em><em>optional</em>) – order by field name</p></li>
<li><p><strong>order_desc</strong> (<em>bool</em><em>, </em><em>optional</em>) – Descending or Ascending Order</p></li>
<li><p><strong>limit</strong> (<em>int</em><em>, </em><em>optional</em>) – record count</p></li>
<li><p><strong>offset</strong> (<em>int</em><em>, </em><em>optional</em>) – record count per page</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>variants (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.set_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">set_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">target</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">first</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">second</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">operator</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#set_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.set_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform set operation like intersection, union and difference between two table selection</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>CREATE boby = raymond &amp; charles</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>set_cmd(conn, “boby”, “raymond”, “charles”, “&amp;”)</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>target</strong> (<em>str</em>) – table selection target</p></li>
<li><p><strong>first</strong> (<em>str</em>) – first selection in operation</p></li>
<li><p><strong>second</strong> (<em>str</em>) – second selection in operation</p></li>
<li><p><strong>operator</strong> (<em>str</em>) – <ul>
<li><p>(union), - (difference), &amp; (intersection) Set operators</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>{“id”: selection_id} if lines have been inserted,</dt><dd><p>or empty dict in case of error</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>{“id”: 2}: 2 lines inserted</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.command.show_cmd">
<code class="sig-prename descclassname">cutevariant.core.command.</code><code class="sig-name descname">show_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">feature</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/command.html#show_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.command.show_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Show command display information from a SHOW query</p>
<dl class="simple">
<dt>This following VQL command:</dt><dd><p><cite>SHOW variants</cite></p>
</dd>
<dt>will execute :</dt><dd><p><cite>show_cmd(conn, “variants”)</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>feature</strong> (<em>str</em>) – Requested feature type of items (Name of the SQL table);
Lower case features are also accepted.</p></li>
<li><p><strong>be</strong> (<em>can</em>) – <cite>“selections”, “fields”, “samples”, “wordsets”</cite></p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>(generator[dict])</em> – Items according to requested feature.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cutevariant.core.vql.VQLSyntaxError" title="cutevariant.core.vql.VQLSyntaxError"><strong>vql.VQLSyntaxError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-cutevariant.core.querybuilder">
<span id="querybuilder"></span><h2>Querybuilder<a class="headerlink" href="#module-cutevariant.core.querybuilder" title="Permalink to this headline">¶</a></h2>
<p>Functions to build a complex SQL Select statement to query variant.</p>
<p>In the most of cases, you will only use build_sql_query function.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="s2">&quot;::memory::&quot;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">build_sql_query</span><span class="p">([</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span><span class="s2">&quot;pos&quot;</span><span class="p">])</span>
<span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
<p>A variant query can be understood from the following 3 points of view.</p>
<div class="section" id="the-sql-statements">
<h3>The SQL statements:<a class="headerlink" href="#the-sql-statements" title="Permalink to this headline">¶</a></h3>
<p>This is the raw sqlite query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;SELECT `variants`.`chr`, `variants`.`pos` FROM `variants` WHERE `variants`.`ref` == &#39;A&#39; &quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-vql-statements">
<h3>The VQL statements:<a class="headerlink" href="#the-vql-statements" title="Permalink to this headline">¶</a></h3>
<p>This is a domain specific language. Check the vql module for more information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;SELECT chr, pos FROM variants WHERE ref == &#39;A&#39;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-python-statements">
<h3>The Python statements:<a class="headerlink" href="#the-python-statements" title="Permalink to this headline">¶</a></h3>
<p>The representation of the query as a dictionnary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span><span class="s2">&quot;pos&quot;</span><span class="p">],</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;variants&quot;</span><span class="p">,</span>
    <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;AND&quot;</span><span class="p">:</span>
        <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;ref&quot;</span><span class="p">,</span> <span class="s2">&quot;operator&quot;</span><span class="p">:</span><span class="s2">&quot;==&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;A&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following module contains several functions to make easy conversion from
Python statements to VQL or SQL statements .</p>
<p>In the most of the case, you only need to use :</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cutevariant.core.querybuilder.build_vql_query" title="cutevariant.core.querybuilder.build_vql_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_vql_query()</span></code></a>: to create a VQL query from python statements</p></li>
<li><p><a class="reference internal" href="#cutevariant.core.querybuilder.build_sql_query" title="cutevariant.core.querybuilder.build_sql_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_sql_query()</span></code></a>: to create a SQL query from python statements</p></li>
</ul>
<dl class="py function">
<dt id="cutevariant.core.querybuilder.build_full_sql_query">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">build_full_sql_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">['chr', 'pos', 'ref', 'alt']</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">order_by</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order_desc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">having</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#build_full_sql_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.build_full_sql_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a complete SQL SELECT statement according to the data loaded from DB</p>
<p>You don’t have to give the association map between fields and sql table origin
nor the association map between samples name and id.
In exchange SQL connection is mandatory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – SQL connection</p></li>
<li><p><strong>fields</strong> (<em>list</em>) – List of fields</p></li>
<li><p><strong>source</strong> (<em>str</em>) – source of the virtual table ( see: selection )</p></li>
<li><p><strong>filters</strong> (<em>dict</em>) – nested condition tree</p></li>
<li><p><strong>order_by</strong> (<em>str/None</em>) – Order by field;
If None, order_desc is not required.</p></li>
<li><p><strong>order_desc</strong> (<em>bool</em>) – Descending or Ascending order</p></li>
<li><p><strong>limit</strong> (<em>int/None</em>) – limit record count;
If None, offset is not required.</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – record count per page</p></li>
<li><p><strong>group_by</strong> (<em>list/None</em>) – list of field you want to group</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.build_sql_query">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">build_sql_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">order_by</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order_desc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">having</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">default_tables</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">samples_ids</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#build_sql_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.build_sql_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build SQL SELECT query</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> (<em>list</em>) – List of fields</p></li>
<li><p><strong>source</strong> (<em>str</em>) – source of the virtual table ( see: selection )</p></li>
<li><p><strong>filters</strong> (<em>dict</em>) – nested condition tree</p></li>
<li><p><strong>order_by</strong> (<em>str/None</em>) – Order by field;
If None, order_desc is not required.</p></li>
<li><p><strong>order_desc</strong> (<em>bool</em>) – Descending or Ascending order</p></li>
<li><p><strong>limit</strong> (<em>int/None</em>) – limit record count;
If None, offset is not required.</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – record count per page</p></li>
<li><p><strong>group_by</strong> (<em>list/None</em>) – list of field you want to group</p></li>
<li><p><strong>default_tables</strong> (<em>dict</em>) – association map between fields and sql table origin</p></li>
<li><p><strong>samples_ids</strong> (<em>dict</em>) – association map between samples name and id</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.build_vql_query">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">build_vql_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">filters</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">group_by</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">having</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#build_vql_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.build_vql_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build VQL SELECT query</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> (<em>list</em>) – List of fields</p></li>
<li><p><strong>source</strong> (<em>str</em>) – source of the virtual table ( see: selection )</p></li>
<li><p><strong>filters</strong> (<em>dict</em>) – nested condition tree</p></li>
<li><p><strong>group_by</strong> (<em>list/None</em>) – list of field you want to group</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.field_function_to_sql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">field_function_to_sql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">field_function</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">use_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#field_function_to_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.field_function_to_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert VQL function to a a jointure field name</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># which correspond to genotype(boby).GT in VQL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;genotype&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">,</span> <span class="s2">&quot;gt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_function_to_sql</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<span class="go">&quot;`genotype_boby`.`gt`&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.fields_to_sql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">fields_to_sql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">field</span></em>, <em class="sig-param"><span class="n">default_tables</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">use_as</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#fields_to_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.fields_to_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Return field as SQL syntax</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<em>str</em><em> or </em><em>tuple</em>) – Column name from a table</p></li>
<li><p><strong>default_tables</strong> (<em>dict</em><em>, </em><em>optional</em>) – association between field name and table origin</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Sql field</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">default_tables</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;variants.chr&quot;</span><span class="p">:</span> <span class="s2">&quot;variants&quot;</span><span class="p">,</span> <span class="s2">&quot;alt&quot;</span><span class="p">:</span> <span class="s2">&quot;variants&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fields_to_sql</span><span class="p">(</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span> <span class="n">default_tables</span><span class="o">=</span><span class="n">default_tables</span><span class="p">)</span>
<span class="go">&quot;`variants`.`chr`&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fields_to_sql</span><span class="p">(</span><span class="s2">&quot;gene&quot;</span><span class="p">,</span> <span class="n">default_tables</span><span class="o">=</span><span class="n">default_tables</span><span class="p">)</span>
<span class="go">&quot;`annotations`.`gene`&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fields_to_sql</span><span class="p">(</span><span class="s2">&quot;coucou&quot;</span><span class="p">,</span> <span class="n">default_tables</span><span class="o">=</span><span class="n">default_tables</span><span class="p">)</span>
<span class="go">&quot;`coucou`&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.fields_to_vql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">fields_to_vql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">field</span></em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#fields_to_vql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.fields_to_vql" title="Permalink to this definition">¶</a></dt>
<dd><p>Return field as VQL syntax</p>
<p>This is used to convert tuple field and create a VQL query</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;sample&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">,</span> <span class="s2">&quot;gt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_to_vql</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<span class="go">&quot;sample[&#39;boby&#39;].gt&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field</strong> (<em>str</em><em> or </em><em>tuple</em>) – a Field</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>fields for vql query</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.filters_to_flat">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">filters_to_flat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filters</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#filters_to_flat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.filters_to_flat" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursive function to convert the filter hierarchical dictionnary into a list of fields</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filters</strong> (<em>dict</em>) – a nested tree of condition. &#64;See example</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all fields are now inside a a list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(list)</p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;AND&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;ref&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;alt&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">filters</span> <span class="o">=</span> <span class="n">_flatten_filter</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<span class="n">filters</span> <span class="ow">is</span> <span class="n">now</span><span class="p">:</span>
<span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;ref&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;alt&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.filters_to_sql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">filters_to_sql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filters</span></em>, <em class="sig-param"><span class="n">default_tables</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#filters_to_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.filters_to_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Return filters as SQL syntax</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filters</strong> (<em>dict</em>) – Nested tree of conditions</p></li>
<li><p><strong>default_tables</strong> (<em>dict</em><em>, </em><em>optional</em>) – Association between field names and tables</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SQL WHERE expression</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filters_to_sql</span><span class="p">({</span><span class="s2">&quot;AND&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;pos&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="mi">34</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;af&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)})</span>
<span class="go">&quot;`variants`.`pos` &gt; 34 AND `variants`.`af` = 10&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a recursive function inside to parse the nested tree of conditions</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.filters_to_vql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">filters_to_vql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filters</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#filters_to_vql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.filters_to_vql" title="Permalink to this definition">¶</a></dt>
<dd><p>Return filters as VQL syntax</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filters</strong> (<em>dict</em>) – Nested tree of conditions</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VQL WHERE expression</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.get_default_tables_and_sample_ids">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">get_default_tables_and_sample_ids</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#get_default_tables_and_sample_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.get_default_tables_and_sample_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Handy function to cache default_tables and sample_ids from database</p>
<p>This function is used for every queries built in <a class="reference internal" href="#cutevariant.core.querybuilder.build_full_sql_query" title="cutevariant.core.querybuilder.build_full_sql_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_full_sql_query()</span></code></a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not forget to clear this cache when samples are added in DB via
a PED file for example.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.wordset_data_to_sql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">wordset_data_to_sql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wordset_expr</span><span class="p">:</span> <span class="n">tuple</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#wordset_data_to_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.wordset_data_to_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the SQL version of a Wordset expression (<cite>(WORDSET’, ‘boby’)</cite>)</p>
<p>Wordset function is used in VQL to filter fields within a set of words.</p>
<p class="rubric">Example</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="p">...</span> <span class="k">WHERE</span> <span class="n">gene</span> <span class="k">IN</span> <span class="n">WORDSET</span><span class="p">(</span><span class="s1">&#39;boby&#39;</span><span class="p">)</span>
<span class="c1">-- will be replaced by:</span>
<span class="k">SELECT</span> <span class="p">...</span> <span class="k">WHERE</span> <span class="n">gene</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">value</span> <span class="k">FROM</span> <span class="k">sets</span> <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;boby&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We return only the sub SELECT statement here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wordset_data_to_sql</span><span class="p">((</span><span class="s2">&quot;WORDSET&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">))</span>
<span class="go">&quot;SELECT value FROM sets WHERE name = &#39;boby&#39;&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wordset_expr</strong> (<em>tuple</em>) – Tuple of 2 items: First one is “WORDSET”,
second one is the name of the queried wordset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Query statement</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.querybuilder.wordset_data_to_vql">
<code class="sig-prename descclassname">cutevariant.core.querybuilder.</code><code class="sig-name descname">wordset_data_to_vql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wordset_expr</span><span class="p">:</span> <span class="n">tuple</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/querybuilder.html#wordset_data_to_vql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.querybuilder.wordset_data_to_vql" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the VQL version of a Wordset expression (<cite>(WORDSET’, ‘boby’)</cite>)</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wordset_data_to_vql</span><span class="p">((</span><span class="s2">&quot;WORDSET&quot;</span><span class="p">,</span> <span class="s2">&quot;boby&quot;</span><span class="p">))</span>
<span class="go">&quot;WORDSET[&#39;boby&#39;]&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wordset_expr</strong> (<em>tuple</em>) – Tuple of 2 items: First one is “WORDSET”,
second one is the name of the queried wordset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Query statement</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-cutevariant.core.sql">
<span id="low-level-sql"></span><h2>Low level SQL<a class="headerlink" href="#module-cutevariant.core.sql" title="Permalink to this headline">¶</a></h2>
<p>Module to bring together all the SQL related functions</p>
<p>To read and write the sqlite database with the schema described here.
Each method refers to a CRUD operation using following prefixes:
<code class="docutils literal notranslate"><span class="pre">get_</span></code>, <code class="docutils literal notranslate"><span class="pre">insert_</span></code>, <code class="docutils literal notranslate"><span class="pre">update_</span></code>, <code class="docutils literal notranslate"><span class="pre">remove_</span></code> and takes a sqlite connection
as <code class="docutils literal notranslate"><span class="pre">conn</span></code> attribute.</p>
<p>The module contains also QueryBuilder class to build complexe variant query based
on filters, columns and selections.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read sample table information</span>
<span class="kn">from</span> <span class="nn">cutevariant.core</span> <span class="k">import</span> <span class="n">sql</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">get_sql_connection</span><span class="p">(</span><span class="s2">&quot;project.db&quot;</span><span class="p">)</span>
<span class="n">sql</span><span class="o">.</span><span class="n">get_samples</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>

<span class="c1"># Build a variant query</span>
<span class="kn">from</span> <span class="nn">cutevariant.core</span> <span class="k">import</span> <span class="n">sql</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">get_sql_connection</span><span class="p">(</span><span class="s2">&quot;project.db&quot;</span><span class="p">)</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">QueryBuilder</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;chr&quot;</span><span class="p">,</span><span class="s2">&quot;pos&quot;</span><span class="p">,</span><span class="s2">&quot;ref&quot;</span><span class="p">,</span><span class="s2">&quot;alt&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">builder</span><span class="o">.</span><span class="n">sql</span><span class="p">())</span>
</pre></div>
</div>
<dl class="py function">
<dt id="cutevariant.core.sql.async_insert_many_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">async_insert_many_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">total_variant_count</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">yield_every</span><span class="o">=</span><span class="default_value">3000</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#async_insert_many_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.async_insert_many_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert many variants from data into variants table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>data</strong> – list of variant dictionnary which contains same number of key than fields numbers.</p></li>
<li><p><strong>total_variant_count</strong> – total variant count, to compute progression</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Yield a tuple with progression and message.
Progression is 0 if total_variant_count is not set.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;generator &lt;tuple &lt;int&gt;, &lt;str&gt;&gt;</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>insert_many_variant(conn, [{chr:”chr1”, pos:24234, alt:”A”,”ref”:T }])
insert_many_variant(conn, reader.get_variants())</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using reader, this can take a while</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>abstractreader</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>About using INSERT OR IGNORE: They avoid the following errors:</p>
<ul class="simple">
<li><p>Upon insertion of a duplicate key where the column must contain
a PRIMARY KEY or UNIQUE constraint</p></li>
<li><p>Upon insertion of NULL value where the column has
a NOT NULL constraint.
=&gt; This is not recommended</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.clear_table">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">clear_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">table_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#clear_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.clear_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear content of the given table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – sqlite table name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.count_query">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">count_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">query</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#count_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.count_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Count elements from the given query or table</p>
<dl class="simple">
<dt>Notes about memoization here:</dt><dd><p>Not implemented here, we should be able to clear cache when
the current project is changed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_annotations_indexes">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_annotations_indexes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_annotations_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_annotations_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indexes on the “annotations” table</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span><span class="p">,</span> <span class="n">group_concat</span><span class="p">(</span><span class="n">annotations</span><span class="p">.</span><span class="n">rowid</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">variants</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">annotations</span> <span class="k">ON</span> <span class="n">variants</span><span class="p">.</span><span class="n">rowid</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">.</span><span class="n">variant_id</span>
<span class="k">WHERE</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">chr</span><span class="p">,</span><span class="n">pos</span>
<span class="k">LIMIT</span> <span class="mi">100</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_indexes">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_indexes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create extra indexes on tables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function must be called after batch insertions.
You should use this function instead of individual functions.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_project">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_project</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">reference</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table “projects” and insert project name and reference genome</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Project name</p></li>
<li><p><strong>reference</strong> (<em>str</em>) – Genom project</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_selection_from_bed">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_selection_from_bed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">source</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">target</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bed_intervals</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_selection_from_bed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_selection_from_bed" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new selection based on the given intervals taken from a BED file</p>
<p>Variants whose positions are contained in the intervals specified by the
BED file will be referenced into the table selection_has_variant under
a new selection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.connection</em>) – Sqlite3 connection</p></li>
<li><p><strong>source</strong> (<em>str</em>) – Selection name (source); Ex: “variants” (default)</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Selection name (target)</p></li>
<li><p><strong>bed_intervals</strong> (<em>list/generator</em><em> [</em><em>dict</em><em>]</em>) – List of intervals
Each interval is a dict with the expected keys: (chrom, start, end, name)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>lastrowid, if lines have been inserted; None otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_selection_from_sql">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_selection_from_sql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">query</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">count</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">from_selection</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_selection_from_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_selection_from_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a selection record from sql variant query</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.connection</em>) – Sqlite3 connection</p></li>
<li><p><strong>query</strong> (<em>str</em>) – SQL query that select all variant ids. See <cite>from_selection</cite></p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of selection</p></li>
<li><p><strong>count</strong> (<em>int/None</em><em>, </em><em>optional</em>) – Variant count</p></li>
<li><p><strong>from_selection</strong> (<em>bool</em><em>, </em><em>optional</em>) – Use a different
field name for variants ids; <cite>variant_id</cite> if <cite>from_selection</cite> is <cite>True</cite>,
just <cite>id</cite> if <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>selection_id, if lines have been inserted; None otherwise (rollback).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_selection_has_variant_indexes">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_selection_has_variant_indexes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_selection_has_variant_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_selection_has_variant_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indexes on “selection_has_variant” table</p>
<p>For joins between selections and variants tables</p>
<dl class="simple">
<dt>Reference:</dt><dd><ul class="simple">
<li><p>create_selections_indexes()</p></li>
<li><p>insert_selection()</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection/sqlite3.Cursor</em>) – Sqlite3 connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_selections_indexes">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_selections_indexes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_selections_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_selections_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indexes on the “selections” table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This function should be called after batch insertions.</p></li>
<li><p>This function ensures the unicity of selections names.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_annotations">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_annotations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">fields</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Create “annotations” table which contains dynamics fields</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>&lt;generator&gt;</em>) – <p>Generator of SQL fields. Example of fields:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;allele str NULL&#39;</span><span class="p">,</span> <span class="s1">&#39;consequence str NULL&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_fields">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_fields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table “fields”</p>
<p>This table contain fields. A field is a column with its description and type;
it can be choose by a user to build a Query
Fields are the columns of the tables: variants, annotations and sample_has_variant.
Fields are extracted from reader objects and are dynamically constructed.</p>
<p>variants:
Chr,pos,ref,alt, filter, qual, dp, af, etc.</p>
<p>annotations:
Gene, transcrit, etc.</p>
<p>sample_has_variant:
Genotype</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.connect</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_metadatas">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_metadatas</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_metadatas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_metadatas" title="Permalink to this definition">¶</a></dt>
<dd><p>Create table metdata</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_samples">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_samples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_samples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Create samples table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.connect</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_selections">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_selections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_selections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_selections" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table “selections” and association table “selection_has_variant”</p>
<p>This table stores variants selection saved by the user:</p>
<blockquote>
<div><ul class="simple">
<li><p>name: name of the set of variants</p></li>
<li><p>count: number of variants concerned by this set</p></li>
<li><p>query: the SQL query which generated the set</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">fields</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Create “variants” and “sample_has_variant” tables which contains dynamics fields</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>fields = get_fields()
create_table_variants(conn, fields)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>get_fields</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>“gt” field in “sample_has_variant” = Patient’s genotype.
- Patient without variant: gt = 0: Wild homozygote
- Patient with variant in the heterozygote state: gt = -1: Heterozygote
- Patient with variant in the homozygote state: gt = 2: Homozygote</p>
<dl class="field-list simple">
<dt class="field-odd">Example of VQL query</dt>
<dd class="field-odd"><p>SELECT chr, pos, genotype(“pierre”) FROM variants</p>
</dd>
</dl>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>fields</strong> – list of field dictionnary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_table_wordsets">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_table_wordsets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_table_wordsets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_table_wordsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the table “sets”</p>
<dl class="simple">
<dt>This table stores variants selection saved by the user:</dt><dd><ul class="simple">
<li><p>name: name of the set of variants</p></li>
<li><p>value: number of variants concerned by this set</p></li>
</ul>
</dd>
<dt>TODO: Denormalization of this table <strong>WILL</strong> BE a problem in the future…</dt><dd><p>But i’m fed up of these practices.</p>
</dd>
</dl>
<p>TODO: for now the one to many relation is not implemented</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.create_variants_indexes">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">create_variants_indexes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#create_variants_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.create_variants_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indexes on the “variants” table</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function must be called after batch insertions.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span><span class="p">,</span> <span class="n">group_concat</span><span class="p">(</span><span class="n">annotations</span><span class="p">.</span><span class="n">rowid</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">variants</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">annotations</span> <span class="k">ON</span> <span class="n">variants</span><span class="p">.</span><span class="n">rowid</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">.</span><span class="n">variant_id</span>
<span class="k">WHERE</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">chr</span><span class="p">,</span><span class="n">pos</span>
<span class="k">LIMIT</span> <span class="mi">100</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.delete_by_name">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">delete_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">table_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#delete_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.delete_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete data in “selections” or “sets” tables with the given name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlit3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Selection/set name</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Name of the table concerned by the deletion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of rows affected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.delete_selection">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">delete_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">selection_id</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#delete_selection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.delete_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the selection with the given id in the “selections” table</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Number of rows deleted</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>&lt;int&gt;</p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite connection</p></li>
<li><p><strong>selection_id</strong> (<em>int</em>) – id from selection table</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of rows affected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.delete_selection_by_name">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">delete_selection_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">table_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'selections'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cutevariant.core.sql.delete_selection_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete data in “selections” or “sets” tables with the given name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlit3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Selection/set name</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Name of the table concerned by the deletion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of rows affected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.delete_set_by_name">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">delete_set_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">table_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'wordsets'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cutevariant.core.sql.delete_set_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete data in “selections” or “sets” tables with the given name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlit3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Selection/set name</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Name of the table concerned by the deletion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of rows affected</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.drop_table">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">drop_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">table_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#drop_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.drop_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop the given table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.connection</em>) – Sqlite3 connection</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – sqlite table name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.edit_selection">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">edit_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">selection</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#edit_selection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.edit_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the name and count of a selection with the given id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 Connection</p></li>
<li><p><strong>selection</strong> (<em>dict</em>) – key/value data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>last rowid</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_annotations">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_annotations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">variant_id</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Get variant annotation for the variant with the given id</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_field_by_category">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_field_by_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">category</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_field_by_category"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_field_by_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Get fields within a category</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>category</strong> (<em>&lt;str&gt;</em>) – Category of field requested.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of dictionnaries with as many keys as there are columns
in the table. Dictionnaries are only related to the given field category.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;tuple &lt;dict&gt;&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_field_by_name">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_field_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_field_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_field_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return field by its name</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>get_fields</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>field_name</strong> – field name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>field record or None if not found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;dict&gt; or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_field_range">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_field_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">sample_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_field_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_field_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return (min,max) of field_name records</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>field_name</strong> – field name</p></li>
<li><p><strong>sample_name</strong> – sample name. mandatory for fields in the “samples” categories</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(min, max) or None if the field can’t be processed with mix/max functions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_field_unique_values">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_field_unique_values</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">field_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">sample_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_field_unique_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_field_unique_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return unique record values for a field name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>field_name</strong> – Name of the field in DB.</p></li>
<li><p><strong>sample_name</strong> – sample name. Mandatory for fields in the “samples” categories</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of unique values (can be empty if the field is not found)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_fields">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_fields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Get fields as list of dictionnary</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>insert_many_fields</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.connect</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of dictionnaries with as many keys as there are columns
in the table.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;tuple &lt;dict&gt;&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_metadatas">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_metadatas</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_metadatas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_metadatas" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of metadatas</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>matadata fieldname as keys</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_one_variant">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_one_variant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">variant_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">with_annotations</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">with_samples</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_one_variant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_one_variant" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the variant with the given id</p>
<p>TODO: with_annotations, with_samples are quite useless and not used for now</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – sqlite3 connection</p></li>
<li><p><strong>variant_id</strong> (<em>int</em>) – Database id of the variant</p></li>
<li><p><strong>with_annotations</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add annotations items. Default is True</p></li>
<li><p><strong>with_samples</strong> (<em>bool</em><em>, </em><em>optional</em>) – add samples items. Default is True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>A variant item with all fields in “variants” table;</dt><dd><p>+ all fields of annotations table if <cite>with_annotations</cite> is True;
+ all fields of sample_has_variant associated to all samples if
<cite>with_samples</cite> is True.
Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">variant</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">keys</span><span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="nb">dict</span> <span class="n">of</span> <span class="n">annotations</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">keys</span><span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;samples&quot;</span><span class="p">:</span> <span class="nb">dict</span> <span class="n">of</span> <span class="n">samples</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">keys</span><span class="o">...</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_query_columns">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_query_columns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'variant'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_query_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_query_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>(DEPRECATED FOR NOW, NOT USED)</p>
<p>Handy func to get columns to be queried according to the group by argument</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Used by intersect_variants, union_variants, subtract_variants
in order to avoid code duplication.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_sample_annotations">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_sample_annotations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">variant_id</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">sample_id</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_sample_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_sample_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Get samples for given sample id and variant id</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_samples">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_samples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_samples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Get samples from sample table</p>
<p>See Also: <a class="reference internal" href="#cutevariant.core.sql.update_sample" title="cutevariant.core.sql.update_sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_sample()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.conn</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Generator of dictionnaries with as sample fields as values.
:Example: ({‘id’: &lt;unique_id&gt;, ‘name’: &lt;sample_name&gt;})</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;generator &lt;dict&gt;&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_selections">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_selections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_selections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_selections" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selections in “selections” table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.connection</em>) – Sqlite3 connection</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Dictionnaries with as many keys as there are columnsin the table.</p>
</dd>
</dl>
<dl class="simple">
<dt>Example::</dt><dd><p>{“id”: …, “name”: …, “count”: …, “query”: …}</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_sql_connection">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_sql_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_sql_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_sql_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a SQLite database and return the connection object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – sqlite filepath</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Sqlite3 Connection</dt><dd><p>The connection is initialized with <cite>row_factory = Row</cite>.
So all results are accessible via indexes or keys.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sqlite3.Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_table_columns">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_table_columns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">table_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_table_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_table_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of columns for the given table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – sqlite table name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Columns description from table_info
((0, ‘chr’, ‘str’, 0, None, 1 … ))</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>used by async_insert_many_variants() to build queries with placeholders</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_variants_count">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_variants_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_variants_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_variants_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of variants in the “variants” table</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_words_in_set">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_words_in_set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">wordset_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_words_in_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_words_in_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Return generator of words in the given word set</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Yield words of the word set.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>generator[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.get_wordsets">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">get_wordsets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#get_wordsets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.get_wordsets" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of words per word set stored in DB</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Yield dictionaries with <cite>name</cite> and <cite>count</cite> keys.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>generator[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.import_wordset_from_file">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">import_wordset_from_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">wordset_name</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#import_wordset_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.import_wordset_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Word set from the given file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wordset_name</strong> – Name of the Word set</p></li>
<li><p><strong>filename</strong> – File to be imported, we expect 1 word per line.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of rows affected during insertion (number of words inserted).
None if 0 word can be inserted.</p>
</dd>
</dl>
<dl class="simple">
<dt>Current data filtering (same as in the word_set plugin):</dt><dd><ul class="simple">
<li><p>Strip trailing spaces and EOL characters</p></li>
<li><p>Skip empty lines</p></li>
<li><p>Skip lines with whitespaces characters (<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">\t\n\r\f\v]</span></code>)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<ul class="simple">
<li><p>The following line will be skipped:
<code class="docutils literal notranslate"><span class="pre">&quot;abc</span>&#160; <span class="pre">def\tghi\t</span>&#160; <span class="pre">\r\n&quot;</span></code></p></li>
<li><p>The following line will be cleaned:
<code class="docutils literal notranslate"><span class="pre">&quot;abc\r\n&quot;</span></code></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_field">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'no_name'</span></em>, <em class="sig-param"><span class="n">category</span><span class="o">=</span><span class="default_value">'variants'</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'text'</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert one field record (NOT USED)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.connect</p>
</dd>
<dt class="field-even">Key name</dt>
<dd class="field-even"><p>field name</p>
</dd>
<dt class="field-odd">Key category</dt>
<dd class="field-odd"><p>category field name.
.. warning:: The default is “variants”. Don’t use sample as category name</p>
</dd>
<dt class="field-even">Key type</dt>
<dd class="field-even"><p>sqlite type which can be: INTEGER, REAL, TEXT
.. todo:: Check this argument…</p>
</dd>
<dt class="field-odd">Key description</dt>
<dd class="field-odd"><p>Text that describes the field (showed to the user).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Last row id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;int&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_many_fields">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_many_fields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_many_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_many_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert multiple fields into “fields” table using one commit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – sqlite3.connect</p></li>
<li><p><strong>data</strong> – list of field dictionnary</p></li>
</ul>
</dd>
<dt class="field-even">Examples</dt>
<dd class="field-even"><p>insert_many_fields(conn, [{name:”sacha”, category:”variant”, count: 0, description=”a description”}])
insert_many_fields(conn, reader.get_fields())</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>insert_field, abstractreader</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_many_metadatas">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_many_metadatas</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span><span class="p">:</span> <span class="n">sqlite3.Connection</span></em>, <em class="sig-param"><span class="n">metadatas</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_many_metadatas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_many_metadatas" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert metadata</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> (<em>sqlite3.Connection</em>) – Sqlite3 Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_many_samples">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_many_samples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">samples</span><span class="p">:</span> <span class="n">list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_many_samples"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_many_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert many samples at a time in samples table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>samples</strong> (<em>&lt;list &lt;str&gt;&gt;</em>) – List of samples names
.. todo:: only names in this list ?</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_many_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_many_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_many_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_many_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for debugging purpose</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_sample">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_sample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'no_name'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert one sample in samples table (USED in TESTS)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>conn</strong> – sqlite3.connect</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Last row id</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;int&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.insert_selection">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">insert_selection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">query</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'no_name'</span></em>, <em class="sig-param"><span class="n">count</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#insert_selection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.insert_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert one selection record</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite3.Connection/sqlite3.Cursor</em>) – Sqlite3 Connection.</p></li>
<li><p><strong>can be a cursor</strong><strong> or </strong><strong>a connection here...</strong> (<em>It</em>) – </p></li>
<li><p><strong>query</strong> (<em>str</em>) – a VQL query</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of selection</p></li>
<li><p><strong>count</strong> (<em>int</em><em>, </em><em>optional</em>) – Variant count of selection</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return last rowid</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>create_selection_from_sql()</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function does a commit !</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.intersect_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">intersect_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query1</span></em>, <em class="sig-param"><span class="n">query2</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#intersect_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.intersect_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the variants obtained by the intersection of 2 queries</p>
<p>Try to handle precedence of operators.
- The precedence of UNION and EXCEPT are similar, they are processed from
left to right.
- Both of the operations are fulfilled before INTERSECT operation,
i.e. they have precedence over it.</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.sanitize_words">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">sanitize_words</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#sanitize_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.sanitize_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of cleaned words</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cutevariant.core.sql.import_wordset_from_file" title="cutevariant.core.sql.import_wordset_from_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">import_wordset_from_file()</span></code></a></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">cutevariant.gui.plugins.word_set.widgets.WordListDialog.load_file()</span></code></p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.subtract_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">subtract_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query1</span></em>, <em class="sig-param"><span class="n">query2</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#subtract_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.subtract_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the variants obtained by the difference of 2 queries</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.union_variants">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">union_variants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query1</span></em>, <em class="sig-param"><span class="n">query2</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#union_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.union_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the variants obtained by the union of 2 queries</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.update_sample">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">update_sample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">sample</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#update_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.update_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Update sample record</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nb">id</span> <span class="p">:</span> <span class="mi">3</span> <span class="c1">#sample id</span>
    <span class="n">name</span> <span class="p">:</span> <span class="s2">&quot;Boby&quot;</span><span class="p">,</span>  <span class="c1">#Name of sample</span>
    <span class="n">family_id</span> <span class="p">:</span> <span class="s2">&quot;fam&quot;</span><span class="p">,</span> <span class="c1"># familly identifier</span>
    <span class="n">father_id</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">#father id, 0 if not</span>
    <span class="n">mother_id</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">#mother id, 0 if not</span>
    <span class="n">sex</span> <span class="p">:</span> <span class="mi">0</span> <span class="c1">#sex code ( 1 = male, 2 = female, 0 = unknown)</span>
    <span class="n">phenotype</span><span class="p">:</span> <span class="mi">0</span> <span class="c1">#( 1 = control , 2 = case, 0 = unknown)</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> (<em>sqlite.connection</em>) – sqlite connection</p></li>
<li><p><strong>sample</strong> (<em>dict</em>) – data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.sql.update_variant">
<code class="sig-prename descclassname">cutevariant.core.sql.</code><code class="sig-name descname">update_variant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">conn</span></em>, <em class="sig-param"><span class="n">variant</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/sql.html#update_variant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.sql.update_variant" title="Permalink to this definition">¶</a></dt>
<dd><p>Update variant data</p>
<p>Used by widgets to save various modifications in a variant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variant</strong> (<em>dict</em>) – Fields as keys; values as values.
‘id’ key is expected to set the variant.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>KeyError if 'id' key is not in the given variant</strong> – </p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-cutevariant.core.vql">
<span id="vql-language"></span><h1>VQL language<a class="headerlink" href="#module-cutevariant.core.vql" title="Permalink to this headline">¶</a></h1>
<p>Proof of concept for the VQL DSL.</p>
<p>From this module, you only need to use parse_vql or parse_one_vql.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="n">parse_one_vql</span><span class="p">(</span><span class="s2">&quot;SELECT chr, pos FROM variants&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
</div>
<p>See test_vql.py for usage and features.</p>
<dl class="py exception">
<dt id="cutevariant.core.vql.VQLSyntaxError">
<em class="property">exception </em><code class="sig-prename descclassname">cutevariant.core.vql.</code><code class="sig-name descname">VQLSyntaxError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em>, <em class="sig-param"><span class="n">col</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/vql.html#VQLSyntaxError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.vql.VQLSyntaxError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="cutevariant.core.vql.error_message_from_err">
<code class="sig-prename descclassname">cutevariant.core.vql.</code><code class="sig-name descname">error_message_from_err</code><span class="sig-paren">(</span><em class="sig-param">err: textx.exceptions.TextXSyntaxError</em>, <em class="sig-param">raw_vql: str) -&gt; (&lt;class 'str'&gt;</em>, <em class="sig-param">&lt;class 'int'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cutevariant/core/vql.html#error_message_from_err"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.vql.error_message_from_err" title="Permalink to this definition">¶</a></dt>
<dd><p>Return human-readable information and index in raw_sql query
about the given exception</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.vql.model_class">
<code class="sig-prename descclassname">cutevariant.core.vql.</code><code class="sig-name descname">model_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">bases</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">attrs</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; type<a class="reference internal" href="_modules/cutevariant/core/vql.html#model_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.vql.model_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass to automatically build the __init__ to get the properties,
and register the class for metamodel</p>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.vql.parse_one_vql">
<code class="sig-prename descclassname">cutevariant.core.vql.</code><code class="sig-name descname">parse_one_vql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">raw_vql</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="reference internal" href="_modules/cutevariant/core/vql.html#parse_one_vql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.vql.parse_one_vql" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute 1 VQL statement</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>1 VQL object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(dict)</p>
</dd>
</dl>
<p>Examples of VQL object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;select_cmd&#39;</span><span class="p">,</span>
    <span class="s1">&#39;columns&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;chr&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">],</span>
    <span class="s1">&#39;source&#39;</span><span class="p">:</span><span class="s1">&#39;variants&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="cutevariant.core.vql.parse_vql">
<code class="sig-prename descclassname">cutevariant.core.vql.</code><code class="sig-name descname">parse_vql</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">raw_vql</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; list<a class="reference internal" href="_modules/cutevariant/core/vql.html#parse_vql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cutevariant.core.vql.parse_vql" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute multiline VQL statement separated by “;”</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>yield 1 VQL object (a dictionnary) per command</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(generator[dict])</p>
</dd>
</dl>
<p>Example of VQL object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;select_cmd&#39;</span><span class="p">,</span>
    <span class="s1">&#39;columns&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;chr&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">],</span>
    <span class="s1">&#39;source&#39;</span><span class="p">:</span><span class="s1">&#39;variants&#39;</span><span class="p">,</span>
    <span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="importers.html" class="btn btn-neutral float-right" title="Project importer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cli.html" class="btn btn-neutral" title="Command Line Interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2020, labsquare.org.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>